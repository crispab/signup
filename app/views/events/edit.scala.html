@(event: models.Event, newEvent : Boolean)

@the_action() = @{
  if(newEvent) {
    routes.Events.create
  } else {
    routes.Events.update(event.id.get)
  }
}

@all_times() = @{
  Seq(
  "00:00", "00:30", "01:00", "01:30", "02:00", "02:30", "03:00",
  "03:30", "04:00", "04:30", "05:00", "05:30", "06:00", "06:30",
  "07:00", "07:30", "08:00", "08:30", "09:00", "09:30", "10:00",
  "10:30", "11:00", "11:30", "12:00", "12:30", "13:00", "13:30",
  "14:00", "14:30", "15:00", "15:30", "16:00", "16:30", "17:00",
  "17:30", "18:00", "18:30", "19:00", "19:30", "20:00", "20:30",
  "21:00", "21:30", "22:00", "22:30", "23:00", "23:30"
  )
}

@page("Redigera event " + event.name){
<div class="row">
  <div class="span5">
    <ul class="breadcrumb">
      <li>
        <a href="@routes.Application.index"><i class="icon-home"></i> Start</a> <span class="divider">/</span>
      </li>
      <li>
        <a href="@routes.Events.list">Event</a> <span class="divider">/</span>
      </li>

      @if(newEvent) {
      <li class="active">Nytt</li>
      } else {
      <li>
        <a href="@routes.Events.show(event.id.get)">@event.name</a> <span class="divider">/</span>
      </li>
      <li class="active">Redigera</li>
      }
    </ul>
    <h2>@if(newEvent) {Nytt} else {Redigera} Event</h2>
    <p></p>

    <form class="form-horizontal" action="@the_action()" method="POST">
      <fieldset>
        <div class="control-group">
          <label class="control-label" for="name">Namn</label>

          <div class="controls">
            <input type="text" class="input-xlarge" id="name" name="name" value="@event.name">
          </div>
        </div>

        <div class="control-group">
          <label class="control-label" for="description">Beskrivning</label>

          <div class="controls">
            <textarea class="input-xlarge" id="description" name="description" rows="3">@event.description</textarea>
          </div>
        </div>

        <div class="control-group">
          <label class="control-label" for="venue">Plats</label>

          <div class="controls">
            <input type="text" class="input-xlarge" id="venue" name="venue" value='@event.venue'>
          </div>
        </div>

        <div class="control-group">
          <label class="control-label" for="start_date">Dag</label>

          <div class="controls">
            <input type="date" class="input-small" id="start_date" name="start_date"
                   value='@event.start_time.format("yyyy-MM-dd")'>
          </div>
        </div>

        <div class="control-group">
          <label class="control-label" for="start_time">Fr√•n kl</label>

          <div class="controls time">
            <select id="start_time" name="start_time" class="input-small">
              @all_times().map { tod =>
                <option value="@tod" @if(tod.equals(event.start_time.format("HH:mm"))) {selected=""}>@tod</option>
              }
            </select>
          </div>
        </div>

        <div class="control-group">
          <label class="control-label" for="end_time">Till kl</label>

          <div class="controls time">
            <select id="end_time" name="end_time" class="input-small">
              @all_times().map { tod =>
              <option value="@tod" @if(tod.equals(event.end_time.format("HH:mm"))) {selected=""}>@tod</option>
              }
            </select>
          </div>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn btn-primary" id="action" name="action" value="save">
            <i class="icon-ok icon-white"></i>Spara
          </button>
          <button type="button" class="btn" id="cancel" onClick='history.go(-1)'>
            <i class="icon-stop"></i>Avbryt
          </button>
        </div>
      </fieldset>
    </form>
  </div>
</div>
}
